# 🎓 题库识别系统 - 新手教程

## 🚀 1分钟快速上手

### 第一步：进入系统目录
```bash
cd question-recog
```

### 第二步：运行系统
```bash
python production_test.py
```

### 第三步：查看结果
系统会自动：
- ✅ 处理 `../题库/` 目录下的所有题库文件
- ✅ 在屏幕上显示识别进度和结果
- ✅ 将详细结果保存到 `production_results.json`

## 📋 详细使用教程

### 🎯 基础使用

#### 1. 准备题库文件
将您的题库文件放在 `../题库/` 目录下，支持格式：
- ✅ **Word文档** (.docx) - **推荐**，效果最好
- ✅ **Excel表格** (.xlsx) - 支持良好
- ⚠️ **PDF文档** (.pdf) - 效果一般

#### 2. 运行识别
```bash
# 进入系统目录
cd question-recog

# 运行主程序
python production_test.py
```

#### 3. 查看结果
运行后您会看到类似输出：
```
🚀 生产环境题库识别系统
========================================
📁 找到 2 个题库文件
📄 处理文件: 附件：安徽分公司电力生产培训题库(1).docx
  📊 识别到 2065 个题目
    ✅ 题目1: true_false (置信度: 0.773)
       题干: 变压器内的绝缘油用于绝缘和散热。
    ✅ 题目2: subjective (置信度: 0.732)
       题干: 投运后的蓄电池组，每2-3年应进行一次...

📊 处理总结
文件数量: 2
题目总数: 2066

📈 题型分布:
  true_false     : 1762 题 (85.3%)  # 判断题
  subjective     :  297 题 (14.4%)  # 简答题
  fill_blank     :    6 题 ( 0.3%)  # 填空题

🎯 置信度分布:
  高置信度 (≥0.8):    1 题 ( 0.0%)  # 可直接使用
  中置信度 (0.6-0.8):  2 题 ( 0.1%)  # 建议确认
  低置信度 (0.4-0.6):  1 题 ( 0.0%)  # 需要审核
  需要复核 (<0.4):     0 题 ( 0.0%)  # 建议重新处理

💾 详细结果已保存至: production_results.json
🎉 生产环境测试完成！系统可以投入使用。
```

### 📊 理解结果

#### 题型说明
- **true_false**: 判断题（对/错、√/×）
- **single_choice**: 单选题（A、B、C、D中选一个）
- **multiple_choice**: 多选题（A、B、C、D中选多个）
- **fill_blank**: 填空题（有空白___需要填写）
- **subjective**: 简答题（需要文字叙述）

#### 置信度说明
- **≥0.8**: 高置信度，可直接使用
- **0.6-0.8**: 中等置信度，建议人工确认
- **0.4-0.6**: 低置信度，需要人工审核
- **<0.4**: 需要复核，建议重新处理

### 📁 查看详细结果

打开 `production_results.json` 文件，包含每个题目的详细信息：
```json
{
  "summary": {
    "total_questions": 2065,
    "files_processed": 2,
    "by_type": {
      "true_false": 1762,
      "subjective": 297,
      "fill_blank": 6
    }
  },
  "results": [
    {
      "source_id": "file://题库.docx#q1",
      "question": {
        "question": "变压器内的绝缘油用于绝缘和散热。",
        "options": [],
        "answer_raw": "对"
      },
      "final_result": {
        "type": "true_false",
        "confidence": 0.773,
        "method": "model_prediction"
      }
    }
  ]
}
```

## 🔧 高级使用

### 1. 处理特定文件
```bash
# 处理单个文件
python src/app.py classify --input "题库文件.xlsx"

# 指定输出文件
python src/app.py classify --input "题库文件.xlsx" --output "我的结果.json"
```

### 2. 重新训练模型（如果需要）
```bash
# 扩展训练数据
python tools/expand_data.py

# 重新训练模型
python train_model.py

# 测试模型效果
python tools/test_trained_model.py
```

### 3. 系统诊断
```bash
# 全面系统检查
python tools/system_audit.py
```

## ❓ 常见问题解决

### Q: "题库目录不存在"
**解决方法**：
```bash
# 确保在正确目录
cd question-recog
python production_test.py

# 或者创建题库目录
mkdir ../题库
# 然后将题库文件放入该目录
```

### Q: 识别效果不好
**解决方法**：
1. **优先使用Word格式**题库（.docx）
2. **检查题库格式**是否规范
3. **重新训练模型**：
   ```bash
   python tools/expand_data.py
   python train_model.py
   ```

### Q: 想要修改配置
**解决方法**：
- 编辑 `configs/app.yaml` - 主要配置
- 编辑 `configs/features.yaml` - 添加专业词汇
- 编辑 `configs/rules.yaml` - 修改识别规则

## 📈 使用技巧

### 1. 最佳文件格式
- 🥇 **Word文档** (.docx) - 识别效果最好
- 🥈 **Excel表格** (.xlsx) - 结构清晰
- 🥉 **PDF文档** (.pdf) - 尽量避免使用

### 2. 提高识别率
- ✅ 确保题库格式规范
- ✅ 题目、选项、答案结构清晰
- ✅ 避免过于复杂的排版

### 3. 批量处理
- ✅ 将多个题库文件放在 `../题库/` 目录
- ✅ 运行一次 `python production_test.py` 即可处理所有文件

## 🎯 实际使用场景

### 场景1：日常题库处理
```bash
# 1. 将新的题库文件放入 ../题库/ 目录
# 2. 运行识别
cd question-recog
python production_test.py
# 3. 查看 production_results.json 获取结果
```

### 场景2：单个文件快速处理
```bash
python src/app.py classify --input "重要题库.docx" --output "结果.json"
```

### 场景3：系统维护
```bash
# 检查系统状态
python tools/system_audit.py

# 重新训练模型（如有新数据）
python tools/expand_data.py
python train_model.py
```

## 🎉 开始使用！

现在您已经掌握了所有使用方法，可以开始使用这个强大的题库识别系统了！

**最简单的开始方式：**
```bash
cd question-recog
python production_test.py
```

**记住：**
- 📄 优先使用Word格式题库
- 📊 查看置信度评估结果质量
- 🔧 遇到问题查看详细文档

**祝您使用愉快！** 🚀
