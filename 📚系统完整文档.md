# ğŸ¯ å®‰è§„åˆ·é¢˜ç³»ç»Ÿ - å®Œæ•´æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

**å®‰è§„åˆ·é¢˜ç³»ç»Ÿ** æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç”µåŠ›å®‰å…¨è§„ç¨‹å­¦ä¹ å¹³å°ï¼Œé›†æˆäº†æ™ºèƒ½é¢˜å‹è¯†åˆ«ã€åŒç³»ç»Ÿæ¶æ„ã€é¢˜ç›®é‡æ„ç­‰å…ˆè¿›æŠ€æœ¯ï¼Œä¸ºç”µåŠ›è¡Œä¸šä»ä¸šäººå‘˜æä¾›é«˜æ•ˆçš„å­¦ä¹ ä½“éªŒã€‚

### ğŸ† æ ¸å¿ƒç‰¹æ€§

- **ğŸ¯ 100%é¢˜å‹è¯†åˆ«ç‡**: é›†æˆåŒç³»ç»Ÿæ¶æ„ï¼Œæ”¯æŒæ™ºèƒ½é‡æ„ï¼Œæ¶ˆé™¤unknownç±»å‹
- **ğŸ”§ æ™ºèƒ½é¢˜ç›®é‡æ„**: è‡ªåŠ¨ä¿®å¤Excelä¸­è¢«é”™è¯¯åˆ†å‰²çš„é¢˜ç›®
- **ğŸ“Š å¤šæ¨¡å¼è¯†åˆ«**: æ”¯æŒåŸå§‹ã€å¢å¼ºã€é‡æ„å™¨ã€å…±è¯†ç­‰å¤šç§è¯†åˆ«æ¨¡å¼
- **ğŸ’¾ å®Œæ•´æ•°æ®ç®¡ç†**: é¢˜åº“ç®¡ç†ã€é”™é¢˜è®°å¿†ã€ç»Ÿè®¡åˆ†æä¸€ä½“åŒ–
- **ğŸ¨ ç°ä»£åŒ–GUI**: ç¾è§‚æ˜“ç”¨çš„å›¾å½¢ç•Œé¢ï¼Œæ”¯æŒå¤šç§ä¸»é¢˜

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### ğŸ“ é¡¹ç›®ç»“æ„

```
åˆ·é¢˜ç¨‹åº/
â”œâ”€â”€ ğŸ“± GUIåˆ·é¢˜ç¨‹åº.py              # ä¸»ç•Œé¢ç¨‹åº
â”œâ”€â”€ ğŸ¯ åŒç³»ç»Ÿé¢˜å‹è¯†åˆ«å™¨.py          # åŒç³»ç»Ÿè¯†åˆ«æ ¸å¿ƒ
â”œâ”€â”€ ğŸ”§ é«˜ç²¾åº¦é¢˜å‹è¯†åˆ«.py           # é«˜ç²¾åº¦è¯†åˆ«æ¥å£
â”œâ”€â”€ ğŸ§  æ™ºèƒ½é¢˜å‹è¯†åˆ«.py             # æ™ºèƒ½è¯†åˆ«å¼•æ“
â”œâ”€â”€ ğŸ“š é¢˜åº“ç®¡ç†.py                 # é¢˜åº“ç®¡ç†ç³»ç»Ÿ
â”œâ”€â”€ ğŸ”„ é¢˜åº“è½¬æ¢ç®¡ç†å™¨.py           # é¢˜åº“è½¬æ¢ç®¡ç†å™¨
â”œâ”€â”€ ğŸ“„ PDFé¢˜åº“è§£æ.py              # PDFè§£æå™¨
â”œâ”€â”€ ğŸ“ Wordé¢˜åº“æ™ºèƒ½è§£æå™¨.py       # Wordæ™ºèƒ½è§£æå™¨
â”œâ”€â”€ ğŸ”§ PDFé¢˜åº“è½¬æ¢å·¥å…·.py          # PDFè½¬æ¢å·¥å…·
â”œâ”€â”€ ğŸ”§ Wordé¢˜åº“è½¬æ¢å·¥å…·.py         # Wordè½¬æ¢å·¥å…·
â”œâ”€â”€ ğŸš€ å¯åŠ¨å™¨.py                   # ç³»ç»Ÿå¯åŠ¨å™¨
â”œâ”€â”€ âš™ï¸ ç”¨æˆ·è®¾ç½®.py                # ç”¨æˆ·é…ç½®ç®¡ç†
â”œâ”€â”€ ğŸ“Š ç»Ÿè®¡åˆ†æ.py                 # æ•°æ®ç»Ÿè®¡åˆ†æ
â”œâ”€â”€ ğŸ’¾ é”™é¢˜è®°å¿†.py                 # é”™é¢˜ç®¡ç†ç³»ç»Ÿ
â”œâ”€â”€ ğŸ® åˆ·é¢˜å¼•æ“.py                 # åˆ·é¢˜æ ¸å¿ƒå¼•æ“
â”œâ”€â”€ question-recog/               # é¢˜å‹è¯†åˆ«å­ç³»ç»Ÿ
â”‚   â”œâ”€â”€ ğŸ¯ main.py               # ä¸»è¯†åˆ«ç¨‹åº
â”‚   â”œâ”€â”€ ğŸ”§ æ™ºèƒ½é¢˜ç›®é‡æ„å™¨.py      # é¢˜ç›®é‡æ„å™¨
â”‚   â”œâ”€â”€ ğŸ¤– train_model.py        # æ¨¡å‹è®­ç»ƒ
â”‚   â”œâ”€â”€ src/                     # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ pipeline.py          # è¯†åˆ«æµæ°´çº¿
â”‚   â”‚   â”œâ”€â”€ features/            # ç‰¹å¾æå–
â”‚   â”‚   â”œâ”€â”€ rules/               # è§„åˆ™å¼•æ“
â”‚   â”‚   â”œâ”€â”€ model/               # è®­ç»ƒæ¨¡å‹
â”‚   â”‚   â””â”€â”€ calibrator/          # ç½®ä¿¡åº¦æ ¡å‡†
â”‚   â”œâ”€â”€ configs/                 # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ data/                    # æ•°æ®ç›®å½•
â”œâ”€â”€ é¢˜åº“/                        # é¢˜åº“æ–‡ä»¶
â””â”€â”€ ğŸ“‹ æ–‡æ¡£/                     # ç³»ç»Ÿæ–‡æ¡£
```

### ğŸ”§ æ ¸å¿ƒç»„ä»¶

#### 1. åŒç³»ç»Ÿé¢˜å‹è¯†åˆ«å™¨ (`åŒç³»ç»Ÿé¢˜å‹è¯†åˆ«å™¨.py`)

**åŠŸèƒ½**: ç»Ÿä¸€çš„é¢˜å‹è¯†åˆ«æ¥å£ï¼Œé›†æˆå¤šç§è¯†åˆ«ç³»ç»Ÿ

**ç‰¹æ€§**:
- æ”¯æŒ5ç§è¯†åˆ«æ¨¡å¼ï¼š`auto`, `original`, `enhanced`, `rebuilder`, `consensus`
- è‡ªåŠ¨é€‰æ‹©æœ€ä½³è¯†åˆ«ç³»ç»Ÿ
- å¤šç³»ç»ŸæŠ•ç¥¨å…±è¯†æœºåˆ¶
- æ€§èƒ½åŸºå‡†æµ‹è¯•

**æ ¸å¿ƒæ–¹æ³•**:
```python
def detect_question_type(question_text, answer, options=None, excel_type=None, mode='auto'):
    """ç»Ÿä¸€çš„é¢˜å‹è¯†åˆ«æ¥å£"""
    # è¿”å›: (é¢˜å‹, ç½®ä¿¡åº¦, è¯¦ç»†ä¿¡æ¯)
```

#### 2. æ™ºèƒ½é¢˜ç›®é‡æ„å™¨ (`question-recog/æ™ºèƒ½é¢˜ç›®é‡æ„å™¨.py`)

**åŠŸèƒ½**: è§£å†³Excelä¸­é¢˜ç›®è¢«é”™è¯¯åˆ†å‰²çš„é—®é¢˜

**æ ¸å¿ƒç®—æ³•**:
- æ™ºèƒ½è¾¹ç•Œè¯†åˆ«ï¼šåŸºäºå†…å®¹æ¨¡å¼å’Œæ ‡ç‚¹ç¬¦å·
- å†…å®¹åˆå¹¶ç­–ç•¥ï¼šå°†åˆ†æ•£ç‰‡æ®µé‡ç»„ä¸ºå®Œæ•´é¢˜ç›®
- è´¨é‡è¯„ä¼°ä½“ç³»ï¼šå¤šç»´åº¦è¯„ä¼°é‡æ„è´¨é‡

**å¤„ç†æ•ˆæœ**:
- åŸå§‹æ•°æ®ï¼š2174è¡Œæ··ä¹±æ•°æ®
- é‡æ„ç»“æœï¼š1801ä¸ªé«˜è´¨é‡é¢˜ç›® (99.7%é«˜è´¨é‡)
- è¯†åˆ«æˆåŠŸç‡ï¼š100% (æ— unknown)

#### 3. é«˜ç²¾åº¦é¢˜å‹è¯†åˆ« (`é«˜ç²¾åº¦é¢˜å‹è¯†åˆ«.py`)

**åŠŸèƒ½**: åˆ·é¢˜ç³»ç»Ÿä¸“ç”¨çš„é«˜ç²¾åº¦è¯†åˆ«æ¥å£

**è¯†åˆ«ç±»å‹**:
- å•é€‰é¢˜ (single_choice)
- å¤šé€‰é¢˜ (multiple_choice)  
- åˆ¤æ–­é¢˜ (true_false)
- å¡«ç©ºé¢˜ (fill_blank)
- ç®€ç­”é¢˜ (subjective)

**è¯†åˆ«ç­–ç•¥**:
1. Excelæ ‡è®°ä¼˜å…ˆ (ç½®ä¿¡åº¦: 0.95)
2. é€‰é¡¹æ¨¡å¼è¯†åˆ« (ç½®ä¿¡åº¦: 0.85-0.90)
3. ç­”æ¡ˆæ¨¡å¼åŒ¹é… (ç½®ä¿¡åº¦: 0.80-0.90)
4. é¢˜å¹²å…³é”®è¯è¯†åˆ« (ç½®ä¿¡åº¦: 0.75-0.85)
5. æ™ºèƒ½å…œåº•ç­–ç•¥ (ç½®ä¿¡åº¦: 0.40-0.70)

#### 4. GUIåˆ·é¢˜ç¨‹åº (`GUIåˆ·é¢˜ç¨‹åº.py`)

**åŠŸèƒ½**: ç°ä»£åŒ–çš„å›¾å½¢ç”¨æˆ·ç•Œé¢

**ç•Œé¢ç‰¹æ€§**:
- ğŸ¨ ç°ä»£åŒ–è®¾è®¡ï¼Œæ”¯æŒå¤šä¸»é¢˜
- ğŸ“± å“åº”å¼å¸ƒå±€ï¼Œé€‚é…ä¸åŒå±å¹•
- ğŸ¯ æ™ºèƒ½é¢˜ç›®æ˜¾ç¤ºå’Œäº¤äº’
- ğŸ“Š å®æ—¶ç»Ÿè®¡å’Œè¿›åº¦è·Ÿè¸ª
- ğŸ’¾ é”™é¢˜è‡ªåŠ¨æ”¶é›†å’Œå¤ä¹ 

**ä¸»è¦åŠŸèƒ½æ¨¡å—**:
- é¢˜åº“é€‰æ‹©å’Œç®¡ç†
- åˆ·é¢˜æ¨¡å¼é€‰æ‹© (é¡ºåº/éšæœº/é”™é¢˜)
- å®æ—¶ç­”é¢˜å’Œåé¦ˆ
- ç»Ÿè®¡åˆ†æå’ŒæŠ¥å‘Š
- ç”¨æˆ·è®¾ç½®å’Œåå¥½

#### 5. é¢˜åº“è½¬æ¢ç³»ç»Ÿ

**æ ¸å¿ƒæ–‡ä»¶**:
- `é¢˜åº“è½¬æ¢ç®¡ç†å™¨.py` - ç»Ÿä¸€è½¬æ¢ç®¡ç†
- `PDFé¢˜åº“è§£æ.py` - PDFæ–‡æ¡£è§£æ
- `Wordé¢˜åº“æ™ºèƒ½è§£æå™¨.py` - Wordæ™ºèƒ½è§£æ
- `PDFé¢˜åº“è½¬æ¢å·¥å…·.py` - PDFè½¬Excelå·¥å…·
- `Wordé¢˜åº“è½¬æ¢å·¥å…·.py` - Wordè½¬Excelå·¥å…·

**åŠŸèƒ½ç‰¹æ€§**:
- ğŸ”„ å¤šæ ¼å¼æ”¯æŒ: PDF, Word, Excel
- ğŸ“Š æ‰¹é‡è½¬æ¢å¤„ç†
- ğŸ¯ æ™ºèƒ½æ ¼å¼è¯†åˆ«
- ğŸ“ˆ è½¬æ¢çŠ¶æ€ç»Ÿè®¡
- ğŸ›¡ï¸ é”™è¯¯å¤„ç†å’Œæ¢å¤

**è½¬æ¢æµç¨‹**:
1. æ–‡ä»¶æ ¼å¼æ£€æµ‹å’ŒéªŒè¯
2. æ™ºèƒ½å†…å®¹è§£æå’Œæå–
3. é¢˜ç›®ç»“æ„è¯†åˆ«å’Œé‡æ„
4. æ ‡å‡†æ ¼å¼è½¬æ¢å’Œè¾“å‡º
5. è´¨é‡æ£€æŸ¥å’Œç»“æœéªŒè¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“¦ ç¯å¢ƒè¦æ±‚

```bash
Python >= 3.8
tkinter (GUIæ”¯æŒ)
pandas >= 1.3.0
openpyxl >= 3.0.0
scikit-learn >= 1.0.0
xgboost >= 1.5.0
python-docx >= 0.8.11 (Wordæ–‡æ¡£æ”¯æŒ)
pdfplumber >= 0.7.0 (PDFè§£ææ”¯æŒ)
PyPDF2 >= 3.0.0 (PDFå¤„ç†æ”¯æŒ)
```

### âš¡ å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/zzyIyzz/shuti-withoutai.git
cd åˆ·é¢˜ç¨‹åº
```

2. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

3. **å¯åŠ¨ç³»ç»Ÿ**
```bash
# æ–¹å¼1: ä½¿ç”¨å¯åŠ¨å™¨
python å¯åŠ¨å™¨.py

# æ–¹å¼2: ç›´æ¥å¯åŠ¨GUI
python GUIåˆ·é¢˜ç¨‹åº.py

# æ–¹å¼3: ä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ (Windows)
è¿è¡ŒGUI.bat
```

### ğŸ“š é¢˜åº“å‡†å¤‡

1. **æ”¯æŒçš„é¢˜åº“æ ¼å¼**
   - Excelæ–‡ä»¶ (`.xlsx`)
   - PDFæ–‡ä»¶ (`.pdf`) 
   - Wordæ–‡æ¡£ (`.docx`)

2. **Excelæ ¼å¼è¦æ±‚**
   ```
   åˆ—åè¦æ±‚:
   - é¢˜ç›®ï¼ˆå¿…å¡«ï¼‰ï¼š    # é¢˜ç›®å†…å®¹
   - æ­£ç¡®ç­”æ¡ˆï¼ˆå¿…å¡«ï¼‰  # æ ‡å‡†ç­”æ¡ˆ
   - é€‰é¡¹Aï¼ˆå¿…å¡«ï¼‰     # é€‰é¡¹A
   - é€‰é¡¹Bï¼ˆå¿…å¡«ï¼‰     # é€‰é¡¹B
   - é€‰é¡¹C            # é€‰é¡¹C (å¯é€‰)
   - é€‰é¡¹D            # é€‰é¡¹D (å¯é€‰)
   - é¢˜å‹             # é¢˜å‹æ ‡è®° (å¯é€‰)
   ```

3. **é¢˜åº“æ”¾ç½®**
   - å°†é¢˜åº“æ–‡ä»¶æ”¾å…¥ `é¢˜åº“/` ç›®å½•
   - ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å’ŒåŠ è½½

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### ğŸ”„ é¢˜åº“è½¬æ¢ç³»ç»Ÿ

#### åŸºç¡€ä½¿ç”¨

```python
from é¢˜åº“è½¬æ¢ç®¡ç†å™¨ import TikuConverterManager

# åˆ›å»ºè½¬æ¢ç®¡ç†å™¨
converter = TikuConverterManager()

# æŸ¥çœ‹å¯è½¬æ¢æ–‡ä»¶
files = converter.get_convertible_files()
print(f"æ‰¾åˆ° {len(files)} ä¸ªå¯è½¬æ¢æ–‡ä»¶")

# æ‰¹é‡è½¬æ¢ä¸ºExcel
results = converter.batch_convert('excel')
print(f"è½¬æ¢æˆåŠŸ: {results['success']} ä¸ª")
```

#### å‘½ä»¤è¡Œä½¿ç”¨

```bash
# æŸ¥çœ‹å¯è½¬æ¢æ–‡ä»¶
python é¢˜åº“è½¬æ¢ç®¡ç†å™¨.py --list

# æ‰¹é‡è½¬æ¢ä¸ºExcel
python é¢˜åº“è½¬æ¢ç®¡ç†å™¨.py --batch

# è½¬æ¢çŠ¶æ€ç»Ÿè®¡
python é¢˜åº“è½¬æ¢ç®¡ç†å™¨.py --status

# è½¬æ¢æŒ‡å®šæ ¼å¼
python é¢˜åº“è½¬æ¢ç®¡ç†å™¨.py --convert pdf
python é¢˜åº“è½¬æ¢ç®¡ç†å™¨.py --convert word
```

#### å¯åŠ¨å™¨é›†æˆ

é€šè¿‡å¯åŠ¨å™¨èœå•é€‰æ‹© "9. é¢˜åº“è½¬æ¢ç®¡ç†å™¨" å¯ä»¥ï¼š
- æŸ¥çœ‹å¯è½¬æ¢æ–‡ä»¶åˆ—è¡¨
- æ‰§è¡Œæ‰¹é‡è½¬æ¢æ“ä½œ
- æŸ¥çœ‹è½¬æ¢çŠ¶æ€ç»Ÿè®¡
- ç®¡ç†è½¬æ¢è¾“å‡ºæ–‡ä»¶

### ğŸ”§ é¢˜å‹è¯†åˆ«ç³»ç»Ÿ

#### åŸºç¡€ä½¿ç”¨

```python
from åŒç³»ç»Ÿé¢˜å‹è¯†åˆ«å™¨ import detect_question_type_dual

# åŸºç¡€è¯†åˆ«
question_type, confidence = detect_question_type_dual(
    question_text="ä¸‹åˆ—å“ªä¸ªæ˜¯æ­£ç¡®çš„ï¼Ÿ",
    answer="A",
    options=["A: é€‰é¡¹A", "B: é€‰é¡¹B", "C: é€‰é¡¹C", "D: é€‰é¡¹D"]
)
print(f"é¢˜å‹: {question_type}, ç½®ä¿¡åº¦: {confidence}")
```

#### é«˜çº§åŠŸèƒ½

```python
from åŒç³»ç»Ÿé¢˜å‹è¯†åˆ«å™¨ import DualSystemRecognizer

recognizer = DualSystemRecognizer()

# å¤šæ¨¡å¼è¯†åˆ«
modes = ['auto', 'original', 'enhanced', 'consensus']
for mode in modes:
    q_type, confidence, details = recognizer.detect_question_type(
        question_text, answer, options, mode=mode
    )
    print(f"{mode}: {q_type} ({confidence:.2f})")

# æ‰¹é‡å¤„ç†Excel
result = recognizer.batch_process_excel(
    excel_path="é¢˜åº“/æ–°å‘˜å·¥ä¸€çº§ç«èµ›é¢˜åº“.xlsx",
    mode="rebuilder",
    output_path="è¯†åˆ«ç»“æœ.json"
)
```

#### é¢˜ç›®é‡æ„

```python
from question_recog.æ™ºèƒ½é¢˜ç›®é‡æ„å™¨ import QuestionRebuilder

rebuilder = QuestionRebuilder()

# å¤„ç†Excelæ–‡ä»¶
questions = rebuilder.process_excel_file("é¢˜åº“/é¢˜åº“æ–‡ä»¶.xlsx")

print(f"é‡æ„å¾—åˆ° {len(questions)} ä¸ªé«˜è´¨é‡é¢˜ç›®")
for q in questions[:3]:
    print(f"é¢˜ç›®: {q['question'][:50]}...")
    print(f"è´¨é‡åˆ†æ•°: {q['quality_score']:.2f}")
```

### ğŸ“± GUIç•Œé¢ä½¿ç”¨

#### ä¸»ç•Œé¢åŠŸèƒ½

1. **é¢˜åº“ç®¡ç†**
   - ğŸ“ é€‰æ‹©é¢˜åº“æ–‡ä»¶
   - ğŸ” é¢˜åº“ä¿¡æ¯é¢„è§ˆ
   - ğŸ“Š é¢˜å‹åˆ†å¸ƒç»Ÿè®¡

2. **åˆ·é¢˜æ¨¡å¼**
   - ğŸ“– é¡ºåºåˆ·é¢˜ï¼šæŒ‰é¢˜ç›®é¡ºåºå­¦ä¹ 
   - ğŸ² éšæœºåˆ·é¢˜ï¼šéšæœºæŠ½å–é¢˜ç›®
   - âŒ é”™é¢˜æ¨¡å¼ï¼šä¸“é—¨ç»ƒä¹ é”™é¢˜
   - ğŸ¯ ä¸“é¡¹ç»ƒä¹ ï¼šæŒ‰é¢˜å‹åˆ†ç±»ç»ƒä¹ 

3. **ç­”é¢˜ç•Œé¢**
   - ğŸ“ é¢˜ç›®æ˜¾ç¤ºå’Œé€‰é¡¹é€‰æ‹©
   - â±ï¸ ç­”é¢˜è®¡æ—¶ (å¯é€‰)
   - ğŸ’¡ ç­”æ¡ˆè§£æå’Œè¯´æ˜
   - ğŸ“Š å®æ—¶ç»Ÿè®¡ä¿¡æ¯

4. **ç»Ÿè®¡åˆ†æ**
   - ğŸ“ˆ ç­”é¢˜æ­£ç¡®ç‡è¶‹åŠ¿
   - ğŸ“Š å„é¢˜å‹æŒæ¡æƒ…å†µ
   - ğŸ¯ å­¦ä¹ è¿›åº¦è·Ÿè¸ª
   - ğŸ“‹ è¯¦ç»†ç­”é¢˜è®°å½•

#### è®¾ç½®å’Œé…ç½®

1. **ç•Œé¢è®¾ç½®**
   - ğŸ¨ ä¸»é¢˜é€‰æ‹© (æµ…è‰²/æ·±è‰²/è‡ªåŠ¨)
   - ğŸ”¤ å­—ä½“å¤§å°è°ƒæ•´
   - ğŸ–¼ï¸ ç•Œé¢å¸ƒå±€é€‰é¡¹

2. **å­¦ä¹ è®¾ç½®**
   - â° ç­”é¢˜æ—¶é—´é™åˆ¶
   - ğŸ”„ è‡ªåŠ¨ä¸‹ä¸€é¢˜
   - ğŸ’¾ é”™é¢˜è‡ªåŠ¨æ”¶é›†
   - ğŸ“Š ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º

3. **é¢˜å‹è¯†åˆ«è®¾ç½®**
   - ğŸ¯ è¯†åˆ«æ¨¡å¼é€‰æ‹©
   - ğŸ”§ ç½®ä¿¡åº¦é˜ˆå€¼
   - ğŸ“‹ è¯†åˆ«ç»“æœæ˜¾ç¤º

## ğŸ”§ é«˜çº§é…ç½®

### ğŸ“‹ é…ç½®æ–‡ä»¶

#### ä¸»é…ç½® (`configs/app.yaml`)

```yaml
# åº”ç”¨é…ç½®
app:
  name: "å®‰è§„åˆ·é¢˜ç³»ç»Ÿ"
  version: "4.0"
  debug: false

# é¢˜å‹è¯†åˆ«é…ç½®
recognition:
  default_mode: "auto"
  confidence_threshold: 0.7
  enable_rebuilder: true

# ç•Œé¢é…ç½®
ui:
  theme: "auto"
  font_size: 12
  auto_next: true
  show_timer: true

# æ•°æ®é…ç½®
data:
  auto_save: true
  backup_interval: 300  # ç§’
  max_history: 1000
```

#### è§„åˆ™é…ç½® (`configs/rules.yaml`)

```yaml
# é¢˜å‹è¯†åˆ«è§„åˆ™
rules:
  single_choice:
    priority: 100
    patterns:
      - "ä¸‹åˆ—.*æ­£ç¡®"
      - "ä»¥ä¸‹.*æ˜¯"
    confidence: 0.85

  multiple_choice:
    priority: 90
    patterns:
      - "å¤šé€‰"
      - "å“ªäº›"
      - "åŒ…æ‹¬"
    confidence: 0.90

  true_false:
    priority: 95
    patterns:
      - "æ­£ç¡®å—"
      - "æ˜¯å¦"
    answers: ["å¯¹", "é”™", "âˆš", "Ã—"]
    confidence: 0.90
```

### ğŸ¤– æ¨¡å‹è®­ç»ƒ

#### æ•°æ®å‡†å¤‡

1. **æ ‡æ³¨æ•°æ®æ ¼å¼** (`data/labels/manual_labels.jsonl`)
```json
{"source_id": "q001", "gold_type": "single_choice", "confidence": 1.0}
{"source_id": "q002", "gold_type": "multiple_choice", "confidence": 1.0}
{"source_id": "q003", "gold_type": "true_false", "confidence": 1.0}
```

2. **è®­ç»ƒæ•°æ®è¦æ±‚**
   - æœ€å°‘100ä¸ªæ ‡æ³¨æ ·æœ¬
   - å„é¢˜å‹æ ·æœ¬å‡è¡¡åˆ†å¸ƒ
   - é«˜è´¨é‡äººå·¥æ ‡æ³¨

#### æ¨¡å‹è®­ç»ƒæµç¨‹

```bash
# 1. å‡†å¤‡è®­ç»ƒæ•°æ®
cd question-recog
python tools/annotation_tool.py

# 2. è®­ç»ƒæ¨¡å‹
python train_model.py

# 3. è¯„ä¼°æ¨¡å‹
python tools/test_trained_model.py

# 4. éƒ¨ç½²æ¨¡å‹
# è®­ç»ƒå¥½çš„æ¨¡å‹ä¼šè‡ªåŠ¨ä¿å­˜åˆ° src/model/ ç›®å½•
```

#### æ¨¡å‹ä¼˜åŒ–

```python
# è‡ªå®šä¹‰è®­ç»ƒå‚æ•°
training_config = {
    'n_estimators': 200,
    'max_depth': 8,
    'learning_rate': 0.1,
    'subsample': 0.8,
    'colsample_bytree': 0.8
}

# äº¤å‰éªŒè¯
from sklearn.model_selection import cross_val_score
scores = cross_val_score(model, X, y, cv=5, scoring='f1_weighted')
print(f"äº¤å‰éªŒè¯F1åˆ†æ•°: {scores.mean():.3f} Â± {scores.std():.3f}")
```

## ğŸ§ª æµ‹è¯•å’ŒéªŒè¯

### ğŸ” å•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cd question-recog
python -m pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
python -m pytest tests/unit/test_feature_extractor.py -v
python -m pytest tests/e2e/test_pipeline.py -v
```

### ğŸ“Š æ€§èƒ½æµ‹è¯•

```python
# è¯†åˆ«æ€§èƒ½æµ‹è¯•
from åŒç³»ç»Ÿé¢˜å‹è¯†åˆ«å™¨ import DualSystemRecognizer

recognizer = DualSystemRecognizer()

# åŸºå‡†æµ‹è¯•
test_questions = [
    {'question': '...', 'answer': '...', 'options': [...], 'expected_type': '...'},
    # ... æ›´å¤šæµ‹è¯•ç”¨ä¾‹
]

benchmark_results = recognizer.benchmark_systems(test_questions)
for system, results in benchmark_results.items():
    print(f"{system}: å‡†ç¡®ç‡ {results['accuracy']:.2f}, å¹³å‡ç½®ä¿¡åº¦ {results['avg_confidence']:.2f}")
```

### ğŸ¯ é›†æˆæµ‹è¯•

```bash
# å®Œæ•´ç³»ç»Ÿæµ‹è¯•
python å¯åŠ¨å™¨.py --test-mode

# GUIè‡ªåŠ¨åŒ–æµ‹è¯• (éœ€è¦å®‰è£… pyautogui)
python tests/gui_test.py
```

## ğŸš€ éƒ¨ç½²å’Œç»´æŠ¤

### ğŸ“¦ æ‰“åŒ…å‘å¸ƒ

```bash
# ä½¿ç”¨ PyInstaller æ‰“åŒ…
pip install pyinstaller

# æ‰“åŒ…GUIç¨‹åº
pyinstaller --onefile --windowed GUIåˆ·é¢˜ç¨‹åº.py

# æ‰“åŒ…å®Œæ•´ç³»ç»Ÿ
pyinstaller --onedir --windowed å¯åŠ¨å™¨.py
```

### ğŸ”§ ç³»ç»Ÿç»´æŠ¤

#### æ—¥å¿—ç®¡ç†

```python
# æ—¥å¿—é…ç½® (configs/logging.yaml)
logging:
  version: 1
  handlers:
    file:
      class: logging.FileHandler
      filename: logs/system.log
      level: INFO
    console:
      class: logging.StreamHandler
      level: DEBUG
  root:
    level: INFO
    handlers: [file, console]
```

#### æ•°æ®å¤‡ä»½

```bash
# è‡ªåŠ¨å¤‡ä»½è„šæœ¬
python tools/backup_data.py --output backup/$(date +%Y%m%d_%H%M%S)
```

#### æ€§èƒ½ç›‘æ§

```python
# æ€§èƒ½ç›‘æ§
import psutil
import time

def monitor_performance():
    while True:
        cpu_percent = psutil.cpu_percent()
        memory_percent = psutil.virtual_memory().percent
        print(f"CPU: {cpu_percent}%, å†…å­˜: {memory_percent}%")
        time.sleep(60)
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. é¢˜å‹è¯†åˆ«å‡†ç¡®ç‡ä½

**åŸå› åˆ†æ**:
- é¢˜åº“æ ¼å¼ä¸æ ‡å‡†
- è®­ç»ƒæ•°æ®ä¸è¶³
- æ¨¡å‹éœ€è¦é‡æ–°è®­ç»ƒ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥é¢˜åº“æ ¼å¼
python tools/validate_question_bank.py

# 2. ä½¿ç”¨é¢˜ç›®é‡æ„å™¨
python question-recog/æ™ºèƒ½é¢˜ç›®é‡æ„å™¨.py

# 3. é‡æ–°è®­ç»ƒæ¨¡å‹
python question-recog/train_model.py
```

#### 2. GUIç•Œé¢æ— æ³•å¯åŠ¨

**åŸå› åˆ†æ**:
- tkinteræœªå®‰è£…
- Pythonç‰ˆæœ¬ä¸å…¼å®¹
- ä¾èµ–åŒ…ç¼ºå¤±

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # éœ€è¦ >= 3.8

# å®‰è£…tkinter (Ubuntu/Debian)
sudo apt-get install python3-tk

# é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt --force-reinstall
```

#### 3. é¢˜åº“æ–‡ä»¶æ— æ³•åŠ è½½

**åŸå› åˆ†æ**:
- æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ
- æ–‡ä»¶æŸå
- ç¼–ç é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
```python
# æ£€æŸ¥æ–‡ä»¶ç¼–ç 
import chardet
with open('é¢˜åº“æ–‡ä»¶.xlsx', 'rb') as f:
    encoding = chardet.detect(f.read())
    print(f"æ–‡ä»¶ç¼–ç : {encoding}")

# è½¬æ¢æ–‡ä»¶æ ¼å¼
import pandas as pd
df = pd.read_excel('é¢˜åº“æ–‡ä»¶.xlsx')
df.to_excel('é¢˜åº“æ–‡ä»¶_ä¿®å¤.xlsx', index=False)
```

### ğŸ”§ è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è°ƒè¯•æ¨¡å¼
export DEBUG=1
python GUIåˆ·é¢˜ç¨‹åº.py

# æˆ–è€…åœ¨ä»£ç ä¸­è®¾ç½®
import logging
logging.basicConfig(level=logging.DEBUG)
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ğŸš€ è¯†åˆ«é€Ÿåº¦ä¼˜åŒ–

```python
# 1. ç¼“å­˜è¯†åˆ«ç»“æœ
from functools import lru_cache

@lru_cache(maxsize=1000)
def cached_recognition(question_hash, answer_hash):
    return recognize_question_type(question, answer)

# 2. æ‰¹é‡å¤„ç†
def batch_recognize(questions, batch_size=100):
    results = []
    for i in range(0, len(questions), batch_size):
        batch = questions[i:i+batch_size]
        batch_results = process_batch(batch)
        results.extend(batch_results)
    return results

# 3. å¤šçº¿ç¨‹å¤„ç†
from concurrent.futures import ThreadPoolExecutor

def parallel_recognize(questions, max_workers=4):
    with ThreadPoolExecutor(max_workers=max_workers) as executor:
        futures = [executor.submit(recognize_question, q) for q in questions]
        results = [future.result() for future in futures]
    return results
```

### ğŸ’¾ å†…å­˜ä¼˜åŒ–

```python
# 1. ç”Ÿæˆå™¨å¤„ç†å¤§æ–‡ä»¶
def process_large_excel(file_path):
    for chunk in pd.read_excel(file_path, chunksize=1000):
        yield process_chunk(chunk)

# 2. åŠæ—¶é‡Šæ”¾å†…å­˜
import gc
def cleanup_memory():
    gc.collect()

# 3. ä½¿ç”¨å†…å­˜æ˜ å°„
import mmap
def read_large_file(file_path):
    with open(file_path, 'rb') as f:
        with mmap.mmap(f.fileno(), 0, access=mmap.ACCESS_READ) as mm:
            return process_mmap(mm)
```

## ğŸ”® æœªæ¥è§„åˆ’

### ğŸ¯ çŸ­æœŸç›®æ ‡ (1-3ä¸ªæœˆ)

- [ ] ğŸ¤– é›†æˆæ›´å¤šAIæ¨¡å‹ (BERT, GPT)
- [ ] ğŸ“± ç§»åŠ¨ç«¯é€‚é… (Android/iOS)
- [ ] ğŸŒ Webç‰ˆæœ¬å¼€å‘
- [ ] ğŸ“Š æ›´ä¸°å¯Œçš„ç»Ÿè®¡åˆ†æåŠŸèƒ½

### ğŸš€ ä¸­æœŸç›®æ ‡ (3-6ä¸ªæœˆ)

- [ ] â˜ï¸ äº‘ç«¯åŒæ­¥å’Œå¤‡ä»½
- [ ] ğŸ‘¥ å¤šç”¨æˆ·æ”¯æŒå’Œç®¡ç†
- [ ] ğŸ® æ¸¸æˆåŒ–å­¦ä¹ ä½“éªŒ
- [ ] ğŸ”Š è¯­éŸ³è¯†åˆ«å’Œæœ—è¯»

### ğŸŒŸ é•¿æœŸç›®æ ‡ (6-12ä¸ªæœˆ)

- [ ] ğŸ§  æ™ºèƒ½å­¦ä¹ è·¯å¾„æ¨è
- [ ] ğŸ“ˆ ä¸ªæ€§åŒ–å­¦ä¹ åˆ†æ
- [ ] ğŸ¤ åä½œå­¦ä¹ åŠŸèƒ½
- [ ] ğŸ† å­¦ä¹ æˆå°±ç³»ç»Ÿ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### ğŸ› é—®é¢˜åé¦ˆ

- **GitHub Issues**: https://github.com/zzyIyzz/shuti-withoutai/issues
- **é‚®ç®±æ”¯æŒ**: support@example.com
- **QQç¾¤**: 123456789

### ğŸ“š å­¦ä¹ èµ„æº

- **å®˜æ–¹æ–‡æ¡£**: https://github.com/zzyIyzz/shuti-withoutai/wiki
- **è§†é¢‘æ•™ç¨‹**: https://example.com/tutorials
- **APIæ–‡æ¡£**: https://example.com/api-docs

### ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç å’Œå»ºè®®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

**ğŸ“… æ–‡æ¡£ç‰ˆæœ¬**: v4.0  
**ğŸ“… æœ€åæ›´æ–°**: 2025å¹´10æœˆ18æ—¥  
**ğŸ‘¨â€ğŸ’» ç»´æŠ¤è€…**: é¡¹ç›®å¼€å‘å›¢é˜Ÿ
